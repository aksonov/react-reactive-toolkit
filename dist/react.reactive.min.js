!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports.ReactReactiveToolkit=e(require("react")):t.ReactReactiveToolkit=e(t.react)}(this,function(t){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),s=i(r),o="a,abbr,address,area,article,aside,audio,b,base,bdi,bdo,blockquote,body,br,button,canvas,caption,cite,code,col,colgroup,data,datalist,dd,del,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hr,html,i,iframe,img,input,ins,kbd,keygen,label,legend,li,link,main,map,mark,meta,meter,nav,noscript,object,ol,optgroup,option,output,p,param,pre,progress,q,rb,rp,rt,rtc,ruby,s,samp,script,section,select,small,source,span,strong,style,sub,sup,table,tbody,td,template,textarea,tfoot,th,thead,time,title,tr,track,u,ul,var,video,wbr";o.split(",").forEach(function(t){s["default"][t]=(0,s["default"])(t)}),e["default"]=s["default"]},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),s=i(r),o=n(3),u=i(o),a=n(4),c=i(a);e["default"]=function(t){return s["default"].createClass({displayName:"R."+(t.displayName||t.name||t.toString()),getInitialState:function(){return{bindingMap:new u["default"],waiting:new u["default"],updated:0}},componentWillReceiveProps:function(t){this._subscribe(t)},componentWillMount:function(){this._subscribe(this.props)},shouldComponentUpdate:function(t,e){return e.updated!==this.state.updated},componentWillUnmount:function(){var t=this.state.bindingMap,e=t.values(),n=!0,i=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var a=s.value;a.dispose()}}catch(c){i=!0,r=c}finally{try{!n&&o["return"]&&o["return"]()}finally{if(i)throw r}}this.setState({bindingMap:new u["default"],waiting:new u["default"],props:null,pendingProps:null})},render:function(){var e=this.state.props;return e?s["default"].createElement(t,e,e.children):null},_onObsNext:function(t){var e=this.state,n=e.waiting,i=e.props,r=e.pendingProps;n["delete"](t),0===n.size&&this._requestUpdate(i||r)},_requestUpdate:function(t){this.setState({props:t,updated:this.state.updated+1,pendingProps:null})},_subscribe:function(t){var e=this,n=this.state,i=n.bindingMap,r=n.waiting,s=(0,c["default"])(t),o=s.props,a=s.bindings,l=[],d=[];a.forEach(function(t){var n=i.get(t.obs);i["delete"](t.obs),n?(n.update(t.ctx,t.key),d.push(n)):(l.push(t),r.set(t.obs,!0),t.onNext=e._onObsNext)});var p=i.values(),f=!0,h=!1,b=void 0;try{for(var v,y=p[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var _=v.value;r["delete"](_.obs),_.dispose()}}catch(x){h=!0,b=x}finally{try{!f&&y["return"]&&y["return"]()}finally{if(h)throw b}}var g=new u["default"];d.forEach(function(t){g.set(t.obs,t)}),l.forEach(function(t){g.set(t.obs,t),t.subscribe()}),this.setState({pendingProps:o,bindingMap:g}),0===r.size&&this._requestUpdate(o)}})}},function(e,n){e.exports=t},function(t,e){(function(e){"use strict";function n(){function t(){this._keys=[],this._values=[]}function e(t){this.array=t,this.i=0}return t.prototype.has=function(t){return this._keys.indexOf(t)>=0},t.prototype.set=function(t,e){this.has(t)||(this._keys.push(t),this._values.push(e))},t.prototype.get=function(t){var e=this._keys.indexOf(t);return e>=0?this._values[e]:void 0},t.prototype["delete"]=function(t){var e=this._keys.indexOf(t);e>=0&&(this._keys.splice(e,1),this._values.splice(e,1))},t.prototype.values=function(){return new e(this._values)},t.prototype.clear=function(){this._keys=[],this._values=[]},Object.defineProperty(t.prototype,"size",{get:function(){return this._values.length}}),e.prototype.next=function(){var t=this.array;return this.i<t.length?{value:t[this.i++],done:!1}:{done:!0}},t}"undefined"!=typeof e.Map?(t.exports=e.Map,t.exports["default"]=t.exports):(t.exports=n(),t.exports["default"]=t.exports)}).call(e,function(){return this}())},function(t,e,n){"use strict";function i(t,e,n){this.value=u,this.obs=t,this.ctx=e,this.key=n,this.onNext=void 0,this._next=this._next.bind(this)}var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var s=n(5),o=n(6),u={};i.prototype._next=function(t){this.ctx[this.key]=t,this.value=t,this.onNext&&this.onNext(this.obs)},i.prototype.update=function(t,e){this.ctx=t,this.key=e,this.value!==u&&(t[e]=this.value)},i.prototype.subscribe=function(){this._dispose=(0,o.subscribe)(this._next,this.obs)},i.prototype.dispose=function(){var t=this._dispose;this._dispose=void 0,t&&t()},e["default"]=function(t){if(!t)return t;var e=r({},t);(0,s.isArray)(t.children)&&(e.children=t.children.slice());var n=[];return(0,s.keys)(t).forEach(function(r){var u=t[r];if("children"===r){var a=u;(0,o.isObs)(a)?n.push(new i(a,e,"children")):(0,s.isArray)(a)&&a.forEach(function(t,r){(0,o.isObs)(t)&&n.push(new i(t,e.children,r))})}else(0,o.isObs)(u)&&n.push(new i(u,e,r))}),{bindings:n,props:e}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.isFunction=function(t){return"function"==typeof t},e.isPlainObject=function(t){return t&&t.constructor===Object},e.isArray=function(t){return t&&t.constructor===Array},e.keys=function(t){return Object.keys(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.subscribe=e.isObs=void 0;var i=n(5);e.isObs=function(t){return t&&((0,i.isFunction)(t.toESObservable)||(0,i.isFunction)(t.subscribe))},e.subscribe=function(t,e){var n=function(t){window.console&&window.console.error&&window.console.error(t)},r=void 0;if((0,i.isFunction)(e.toESObservable))r=e.toESObservable().subscribe({next:t,error:n});else{if(!(0,i.isFunction)(e.subscribe))throw new Error("No subscribe function found from "+e);r=e.subscribe.length>1?e.subscribe(t,n):e.subscribe({next:t,error:n})}if((0,i.isFunction)(r))return r;if(r&&(0,i.isFunction)(r.dispose))return function(){return r.dispose()};if(r&&(0,i.isFunction)(r.unsubscribe))return function(){return r.unsubscribe()};throw new Error("Observable returned unknown disposable "+r)}}])});